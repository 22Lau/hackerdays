---
import { SUPPORTED_LOCALES, LOCALE_NAMES, getLocaleFromPath, getPathForLocale } from '../utils/i18n';

interface Props {
  currentPath: string;
}

const { currentPath } = Astro.props;
const currentLocale = getLocaleFromPath(currentPath);
---

<div class="relative inline-block text-left">
  <div class="flex items-center space-x-1 md:space-x-2">
    {SUPPORTED_LOCALES.map((locale) => {
      const isActive = locale === currentLocale;
      const path = getPathForLocale(currentPath, locale);
      
      return (
        <a
          href={path}
          class={`px-2 py-2 md:px-3 md:py-2 rounded-md text-sm font-medium transition-colors flex items-center space-x-1 ${
            isActive 
              ? 'bg-primary-100 text-primary-700 border border-primary-300' 
              : 'text-earth-600 hover:text-primary-600 hover:bg-primary-50 border border-transparent'
          }`}
          hreflang={locale}
        >
          <img 
            src={`/flags/${locale}.svg`} 
            alt={`${LOCALE_NAMES[locale]} flag`}
            class="w-6 h-4 object-cover rounded-sm"
          />
          <span class="hidden sm:inline">{LOCALE_NAMES[locale]}</span>
        </a>
      );
    })}
  </div>
</div> 